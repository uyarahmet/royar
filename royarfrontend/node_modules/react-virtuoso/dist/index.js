"use strict";var t=require("@virtuoso.dev/react-urx"),e=require("@virtuoso.dev/urx"),n=require("react");function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(require("resize-observer-polyfill"));function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function a(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function u(t,e){return!(!t||t[0]!==e[0]||t[1]!==e[1])}function c(t,e){return!(!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex)}var m="up",f=e.system(function(){var t=e.stream(),n=e.statefulStream(0),r=e.stream(),o=e.statefulStream(0),i=e.stream(),a=e.statefulStream(0),s=e.statefulStream(0),l=e.stream(),u=e.stream(),c=e.statefulStream(!1);e.connect(t,o);var f=e.statefulStream("down");return e.connect(e.pipe(t,e.scan(function(t,e){return{direction:e<t.prevScrollTop?m:"down",prevScrollTop:e}},{direction:"down",prevScrollTop:0}),e.map(function(t){return t.direction})),f),{scrollTop:t,viewportHeight:i,headerHeight:a,footerHeight:s,smoothScrollTargetReached:r,scrollTo:l,scrollBy:u,scrollDirection:f,statefulScrollTop:o,deviation:n,scrollingInProgress:c}},[],{singleton:!0}),d=e.system(function(){var t=e.statefulStream(!1);return{propsReady:t,didMount:e.streamFromEmitter(e.pipe(t,e.filter(function(t){return t}),e.distinctUntilChanged()))}},[],{singleton:!0}),p={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,totalHeight:0}},h=e.system(function(t){var n=t[0],r=n.scrollTop,o=n.viewportHeight,i=e.statefulStream(!1),a=e.statefulStream(!0),s=e.stream(),l=e.stream(),u=e.stream(),c=e.streamFromEmitter(e.pipe(e.merge(e.pipe(e.duc(r),e.skip(1),e.mapTo(!0)),e.pipe(e.duc(r),e.skip(1),e.mapTo(!1),e.debounceTime(100))),e.distinctUntilChanged()));e.connect(e.pipe(e.duc(r),e.map(function(t){return 0===t}),e.distinctUntilChanged()),a),e.connect(a,l);var m=e.streamFromEmitter(e.pipe(e.combineLatest(u,e.duc(r),e.duc(o)),e.scan(function(t,e){var n=e[0],r=n.bottom,o=n.offsetBottom,i=e[1],a=e[2],s={viewportHeight:a,scrollTop:i,offsetBottom:o,totalHeight:r+o};return 0===o&&i+a-r>-4?{atBottom:!0,state:s}:{atBottom:!1,notAtBottomBecause:s.totalHeight>t.state.totalHeight?"SIZE_INCREASED":0!==o?"NOT_SHOWING_LAST_ITEM":a<t.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":i<t.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:s}},p),e.distinctUntilChanged(function(t,e){return t&&t.atBottom===e.atBottom})));return e.connect(e.pipe(m,e.map(function(t){return t.atBottom})),i),e.subscribe(i,function(t){setTimeout(function(){return e.publish(s,t)})}),{isScrolling:c,isAtTop:a,isAtBottom:i,atBottomState:m,atTopStateChange:l,atBottomStateChange:s,listStateListener:u}},e.tup(f)),v=e.system(function(t){var n=t[0].scrollTop,r=t[1].isScrolling,o=e.statefulStream(0),i=e.statefulStream(!1),a=e.stream(),s=e.statefulStream(!1);return e.connect(e.pipe(r,e.filter(function(t){return!t}),e.mapTo(0)),o),e.connect(e.pipe(n,e.throttleTime(100),e.withLatestFrom(r),e.filter(function(t){return!!t[1]}),e.scan(function(t,e){return[t[1],e[0]]},[0,0]),e.map(function(t){return t[1]-t[0]})),o),e.connect(e.pipe(o,e.withLatestFrom(s,i,a),e.filter(function(t){return!!t[1]}),e.map(function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=n.enter;if(r){if((0,n.exit)(e,o))return!1}else if(i(e,o))return!0;return r}),e.distinctUntilChanged()),i),e.subscribe(e.pipe(e.combineLatest(i,o,a),e.withLatestFrom(s)),function(t){var e=t[0],n=t[1];return e[0]&&n&&n.change&&n.change(e[1],e[2])}),{isSeeking:i,scrollSeekConfiguration:s,scrollVelocity:o,scrollSeekRangeChanged:a}},e.tup(f,h),{singleton:!0}),g={lvl:0};function S(t,e,n,r,o){return void 0===r&&(r=g),void 0===o&&(o=g),{k:t,v:e,lvl:n,l:r,r:o}}function I(t){return t===g}function C(){return g}function x(t,e){if(I(t))return g;var n=t.k,r=t.l,o=t.r;if(e===n){if(I(r))return o;if(I(o))return r;var i=E(r);return z(H(t,{k:i[0],v:i[1],l:L(r)}))}return z(H(t,e<n?{l:x(r,e)}:{r:x(o,e)}))}function w(t,e,n){if(void 0===n&&(n="k"),I(t))return[-Infinity,void 0];if(t[n]===e)return[t.k,t.v];if(t[n]<e){var r=w(t.r,e,n);return-Infinity===r[0]?[t.k,t.v]:r}return w(t.l,e,n)}function T(t,e,n){return I(t)?S(e,n,1):e===t.k?H(t,{k:e,v:n}):function(t){return B(M(t))}(H(t,e<t.k?{l:T(t.l,e,n)}:{r:T(t.r,e,n)}))}function b(t,e,n){if(I(t))return[];var r=t.k,o=t.v,i=t.r,a=[];return r>e&&(a=a.concat(b(t.l,e,n))),r>=e&&r<=n&&a.push({k:r,v:o}),r<=n&&(a=a.concat(b(i,e,n))),a}function y(t){return I(t)?[]:[].concat(y(t.l),[{k:t.k,v:t.v}],y(t.r))}function E(t){return I(t.r)?[t.k,t.v]:E(t.r)}function L(t){return I(t.r)?t.l:z(H(t,{r:L(t.r)}))}function H(t,e){return S(void 0!==e.k?e.k:t.k,void 0!==e.v?e.v:t.v,void 0!==e.lvl?e.lvl:t.lvl,void 0!==e.l?e.l:t.l,void 0!==e.r?e.r:t.r)}function k(t){return I(t)||t.lvl>t.r.lvl}function z(t){var e=t.l,n=t.r,r=t.lvl;if(n.lvl>=r-1&&e.lvl>=r-1)return t;if(r>n.lvl+1){if(k(e))return M(H(t,{lvl:r-1}));if(I(e)||I(e.r))throw new Error("Unexpected empty nodes");return H(e.r,{l:H(e,{r:e.r.l}),r:H(t,{l:e.r.r,lvl:r-1}),lvl:r})}if(k(t))return B(H(t,{lvl:r-1}));if(I(n)||I(n.l))throw new Error("Unexpected empty nodes");var o=n.l,i=k(o)?n.lvl-1:n.lvl;return H(o,{l:H(t,{r:o.l,lvl:r-1}),r:B(H(n,{l:o.r,lvl:i})),lvl:o.lvl+1})}function F(t,e,n){return I(t)?[]:R(b(t,w(t,e)[0],n),function(t){return{index:t.k,value:t.v}})}function R(t,e){var n=t.length;if(0===n)return[];for(var r=e(t[0]),o=r.index,i=r.value,a=[],s=1;s<n;s++){var l=e(t[s]),u=l.index,c=l.value;a.push({start:o,end:u-1,value:i}),o=u,i=c}return a.push({start:o,end:Infinity,value:i}),a}function B(t){var e=t.r,n=t.lvl;return I(e)||I(e.r)||e.lvl!==n||e.r.lvl!==n?t:H(e,{l:H(t,{r:e.l}),lvl:n+1})}function M(t){var e=t.l;return I(e)||e.lvl!==t.lvl?t:H(e,{r:H(t,{l:e.r})})}function O(t,e,n,r){void 0===r&&(r=0);for(var o=t.length-1;r<=o;){var i=Math.floor((r+o)/2),a=n(t[i],e);if(0===a)return i;if(-1===a){if(o-r<2)return i-1;o=i-1}else{if(o===r)return i;r=i+1}}throw new Error("Failed binary finding record in array - "+t.join(",")+", searched for "+e)}function P(t,e,n){return t[O(t,e,n)]}function U(t){var e=t.size,n=t.startIndex,r=t.endIndex;return function(t){return t.start===n&&(t.end===r||Infinity===t.end)&&t.value===e}}function W(t,e){var n=t.index;return e===n?0:e<n?-1:1}function A(t,e){var n=t.offset;return e===n?0:e<n?-1:1}function N(t){return{index:t.index,value:t}}function V(t,e){var n=e[0],r=e[1],o=t.sizeTree,i=t.offsetTree,a=o,s=0;if(r.length>0&&I(o)&&2===n.length){var u=n[0].size,c=n[1].size;a=r.reduce(function(t,e){return T(T(t,e,u),e+1,c)},a)}else{var m=function(t,e){for(var n,r=I(t)?0:Infinity,o=l(e);!(n=o()).done;){var i=n.value,a=i.size,s=i.startIndex,u=i.endIndex;if(r=Math.min(r,s),I(t))t=T(t,0,a);else{var c=F(t,s-1,u+1);if(!c.some(U(i))){for(var m,f=!1,d=!1,p=l(c);!(m=p()).done;){var h=m.value,v=h.start,g=h.end,S=h.value;f?(u>=v||a===S)&&(t=x(t,v)):(d=S!==a,f=!0),g>u&&u>=v&&S!==a&&(t=T(t,u+1,S))}d&&(t=T(t,s,a))}}}return[t,r]}(a,n);a=m[0],s=m[1]}if(a===o)return t;var f=0,d=0,p=0,h=0;if(0!==s){h=O(i,s-1,W),p=i[h].offset;var v=w(a,s-1);f=v[0],d=v[1],i.length&&i[h].size===w(a,s)[1]&&(h-=1),i=i.slice(0,h+1)}else i=[];for(var g,S=l(F(a,s,Infinity));!(g=S()).done;){var b=g.value,y=b.start,E=b.value,L=(y-f)*d+p;i.push({offset:L,size:E,index:y}),f=y,p=L,d=E}return{sizeTree:a,offsetTree:i,groupOffsetTree:r.reduce(function(t,e){return T(t,e,G(e,i))},C()),lastIndex:f,lastOffset:p,lastSize:d,groupIndices:r}}function G(t,e){if(0===e.length)return 0;var n=P(e,t,W);return n.size*(t-n.index)+n.offset}function _(t,e){if(!j(e))return t;for(var n=0;e.groupIndices[n]<=t+n;)n++;return t+n}function j(t){return!I(t.groupOffsetTree)}var D=e.system(function(){var t=e.stream(),n=e.stream(),r=e.stream(),o=e.statefulStream(0),a=e.statefulStream([]),s=e.statefulStream(void 0),l=e.statefulStream(void 0),u=e.statefulStream(void 0),c={offsetTree:[],sizeTree:C(),groupOffsetTree:C(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},m=e.statefulStreamFromEmitter(e.pipe(t,e.withLatestFrom(a),e.scan(V,c),e.distinctUntilChanged()),c);e.connect(e.pipe(a,e.filter(function(t){return t.length>0}),e.withLatestFrom(m),e.map(function(t){var e=t[0],n=t[1],r=e.reduce(function(t,e,r){return T(t,e,G(e,n.offsetTree)||r)},C());return i({},n,{groupIndices:e,groupOffsetTree:r})})),m),e.connect(e.pipe(n,e.withLatestFrom(m),e.filter(function(t){return t[0]<t[1].lastIndex}),e.map(function(t){var e=t[1];return[{startIndex:t[0],endIndex:e.lastIndex,size:e.lastSize}]})),t),e.connect(s,l);var f=e.statefulStreamFromEmitter(e.pipe(s,e.map(function(t){return void 0===t})),!0);e.connect(e.pipe(l,e.filter(function(t){return void 0!==t}),e.map(function(t){return[{startIndex:0,endIndex:0,size:t}]})),t);var d=e.streamFromEmitter(e.pipe(t,e.withLatestFrom(m),e.scan(function(t,e){var n=e[1];return{changed:n!==t.sizes,sizes:n}},{changed:!1,sizes:c}),e.map(function(t){return t.changed})));e.connect(e.pipe(o,e.scan(function(t,e){return{diff:t.prev-e,prev:e}},{diff:0,prev:0}),e.map(function(t){return t.diff}),e.filter(function(t){return t>0})),r);var p=e.streamFromEmitter(r);return e.connect(e.pipe(r,e.withLatestFrom(m),e.map(function(t){var e=t[0],n=t[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return y(n.sizeTree).reduce(function(t,n){var r=n.k,o=n.v;return{ranges:[].concat(t.ranges,[{startIndex:t.prevIndex,endIndex:r+e-1,size:t.prevSize}]),prevIndex:r+e,prevSize:o}},{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges})),t),{data:u,totalCount:n,sizeRanges:t,groupIndices:a,defaultItemSize:l,fixedItemSize:s,unshiftWith:r,beforeUnshiftWith:p,firstItemIndex:o,sizes:m,listRefresh:d,trackItemSizes:f}},[],{singleton:!0}),K="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function q(t){var e="number"==typeof t?{index:t}:t;return e.align||(e.align="start"),e.behavior&&K||(e.behavior="auto"),e.offset||(e.offset=0),e}var Y=e.system(function(t){var n=t[0],r=n.sizes,o=n.totalCount,i=n.listRefresh,a=t[1],s=a.scrollingInProgress,l=a.viewportHeight,u=a.scrollTo,c=a.smoothScrollTargetReached,m=a.headerHeight,f=a.footerHeight,d=e.stream(),p=e.statefulStream(0),h=null,v=null,g=null,S=function(){h&&(h(),h=null),g&&(g(),g=null),v&&(clearTimeout(v),v=null),e.publish(s,!1)};return e.connect(e.pipe(d,e.withLatestFrom(r,l,o,p,m,f),e.map(function(t){var n=t[0],r=t[1],o=t[2],a=t[3],l=t[4],u=t[5],m=t[6],f=q(n),p=f.align,I=f.behavior,C=f.offset,x=a-1,T=f.index;T=_(T,r);var b=G(T=Math.max(0,T,Math.min(x,T)),r.offsetTree)+u;"end"===p?(b=Math.round(b-o+w(r.sizeTree,T)[1]),T===x&&(b+=m)):"center"===p?b=Math.round(b-o/2+w(r.sizeTree,T)[1]/2):b-=l,C&&(b+=C);var y=function(t){S(),t&&e.publish(d,n)};if(S(),"smooth"===I){var E=!1;g=e.subscribe(i,function(t){E=E||t}),h=e.handleNext(c,function(){y(E)})}else h=e.handleNext(i,y);return v=setTimeout(function(){S()},1200),e.publish(s,!0),{top:b,behavior:I}})),u),{scrollToIndex:d,topListHeight:p}},e.tup(D,f),{singleton:!0}),Z=function(t,e,n){return"number"==typeof t?n===m&&"top"===e||"down"===n&&"bottom"===e?t:0:n===m?"top"===e?t.main:t.reverse:"bottom"===e?t.main:t.reverse},$=e.system(function(t){var n=t[0],r=n.scrollTop,o=n.viewportHeight,i=n.deviation,a=n.headerHeight,s=e.stream(),l=e.statefulStream(0),c=e.statefulStream(0);return{listBoundary:s,overscan:c,topListHeight:l,visibleRange:e.statefulStreamFromEmitter(e.pipe(e.combineLatest(e.duc(r),e.duc(o),e.duc(a),e.duc(s,u),e.duc(c),e.duc(l),e.duc(i)),e.map(function(t){var e=t[0],n=t[1],r=t[3],o=r[0],i=r[1],a=t[4],s=t[6],l=e-t[2]-s,u="none";return(o-=s)>e+t[5]&&(u=m),(i-=s)<e+n&&(u="down"),"none"!==u?[Math.max(l-Z(a,"top",u),0),l+n+Z(a,"bottom",u)]:null}),e.filter(function(t){return null!=t}),e.distinctUntilChanged(u)),[0,0])}},e.tup(f),{singleton:!0}),J=e.system(function(t){var n=t[0],r=n.scrollTop,o=n.scrollTo,a=e.stream(),s=e.stream(),l=e.stream(),u=e.statefulStream(!1);return e.connect(e.pipe(e.combineLatest(s,a),e.map(function(t){return Math.max(0,t[0]-t[1].offsetTop)})),r),e.connect(e.pipe(o,e.withLatestFrom(a),e.map(function(t){var e=t[0];return i({},e,{top:e.top+t[1].offsetTop})})),l),{useWindowScroll:u,windowScrollTop:s,windowViewportRect:a,windowScrollTo:l}},e.tup(f)),Q={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},X={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},tt=Math.ceil,et=Math.floor,nt=Math.min,rt=Math.max;function ot(t){return tt(t)-t<.03?tt(t):et(t)}function it(t,e){return Array.from({length:e-t+1}).map(function(e,n){return{index:n+t}})}var at=e.system(function(t){var n=t[0],r=n.overscan,o=n.visibleRange,a=n.listBoundary,s=t[1],l=s.scrollTop,m=s.viewportHeight,f=s.scrollBy,d=s.scrollTo,p=s.smoothScrollTargetReached,h=t[2],v=t[3],g=t[4],S=g.propsReady,I=g.didMount,C=t[5],x=C.windowViewportRect,w=C.windowScrollTo,T=C.useWindowScroll,b=C.windowScrollTop,y=e.statefulStream(0),E=e.statefulStream(0),L=e.statefulStream(Q),H=e.statefulStream({height:0,width:0}),k=e.statefulStream({height:0,width:0}),z=e.stream();e.connect(e.pipe(I,e.withLatestFrom(E),e.filter(function(t){return 0!==t[1]}),e.map(function(t){return{items:it(0,t[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),L),e.connect(e.pipe(e.combineLatest(e.duc(y),o,e.duc(k,function(t,e){return t&&t.width===e.width&&t.height===e.height})),e.withLatestFrom(H),e.map(function(t){var e=t[0],n=e[0],r=e[1],o=r[0],i=r[1],a=e[2],s=t[1],l=a.height,u=a.width,c=s.width;if(0===n||0===c)return Q;if(0===u)return X;var m=ot(c/u),f=m*et(o/l),d=m*tt(i/l)-1;d=nt(n-1,d);var p=it(f=nt(d,rt(0,f)),d),h=st(s,a,p),v=h.top,g=h.bottom;return{items:p,offsetTop:v,offsetBottom:tt(n/m)*l-g,top:v,bottom:g,itemHeight:l,itemWidth:u}})),L),e.connect(e.pipe(H,e.map(function(t){return t.height})),m),e.connect(e.pipe(e.combineLatest(H,k,L),e.map(function(t){var e=st(t[0],t[1],t[2].items);return[e.top,e.bottom]}),e.distinctUntilChanged(u)),a),e.connect(e.pipe(a,e.withLatestFrom(L),e.map(function(t){return{bottom:t[0][1],offsetBottom:t[1].offsetBottom}})),h.listStateListener);var F=e.streamFromEmitter(e.pipe(e.duc(L),e.filter(function(t){return t.items.length>0}),e.withLatestFrom(y),e.filter(function(t){var e=t[0].items;return e[e.length-1].index===t[1]-1}),e.map(function(t){return t[1]-1}),e.distinctUntilChanged())),R=e.streamFromEmitter(e.pipe(e.duc(L),e.filter(function(t){var e=t.items;return e.length>0&&0===e[0].index}),e.mapTo(0),e.distinctUntilChanged())),B=e.streamFromEmitter(e.pipe(e.duc(L),e.filter(function(t){return t.items.length>0}),e.map(function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}}),e.distinctUntilChanged(c)));e.connect(B,v.scrollSeekRangeChanged),e.connect(e.pipe(z,e.withLatestFrom(H,k,y),e.map(function(t){var e=t[1],n=t[2],r=t[3],o=q(t[0]),i=o.align,a=o.behavior,s=o.offset,l=o.index,u=lt(e,n,l=Math.max(0,l,Math.min(r-1,l)));return"end"===i?u=Math.round(u-e.height+n.height):"center"===i&&(u=Math.round(u-e.height/2+n.height/2)),s&&(u+=s),{top:u,behavior:a}})),d);var M=e.statefulStreamFromEmitter(e.pipe(L,e.map(function(t){return t.offsetBottom+t.bottom})),0);return e.connect(e.pipe(x,e.map(function(t){return{width:t.visibleWidth,height:t.visibleHeight}})),H),i({totalCount:y,viewportDimensions:H,itemDimensions:k,scrollTop:l,overscan:r,scrollBy:f,scrollTo:d,scrollToIndex:z,smoothScrollTargetReached:p,windowViewportRect:x,windowScrollTo:w,useWindowScroll:T,windowScrollTop:b,initialItemCount:E},v,{gridState:L,totalListHeight:M},h,{startReached:R,endReached:F,rangeChanged:B,propsReady:S})},e.tup($,f,h,v,d,J));function st(t,e,n){var r=e.height;return void 0===r||0===n.length?{top:0,bottom:0}:{top:lt(t,e,n[0].index),bottom:lt(t,e,n[n.length-1].index)+r}}function lt(t,e,n){var r=ot(t.width/e.width);return et(n/r)*e.height}function ut(t,e){void 0===e&&(e=!0);var r=n.useRef(null),i=new o.default(function(e){var n=e[0].target;null!==n.offsetParent&&t(n)});return{ref:r,callbackRef:function(t){t&&e?(i.observe(t),r.current=t):(r.current&&i.unobserve(r.current),r.current=null)}}}function ct(t,e){return void 0===e&&(e=!0),ut(t,e).callbackRef}function mt(t){var e=n.useRef(null),r=n.useCallback(function(n){if(null!==n){var r=n.getBoundingClientRect(),o=window.innerHeight-Math.max(0,r.top),i=r.top+window.pageYOffset;e.current={offsetTop:i,visibleHeight:o,visibleWidth:r.width},t(e.current)}},[t]),o=ut(r),i=o.callbackRef,a=o.ref,s=n.useCallback(function(){r(a.current)},[r,a]);return n.useEffect(function(){return window.addEventListener("scroll",s),window.addEventListener("resize",s),function(){window.removeEventListener("scroll",s),window.removeEventListener("resize",s)}},[s]),i}var ft="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function dt(t,r,o,i){void 0===i&&(i=e.noop);var a=n.useRef(null),s=n.useRef(null),l=n.useRef(null),u=n.useCallback(function(e){var n=e.target,o=n===window||n===document?window.pageYOffset||document.documentElement.scrollTop:n.scrollTop;t(Math.max(o,0)),null!==s.current&&(o===s.current||o<=0||o===n.scrollHeight-n.offsetHeight)&&(s.current=null,r(!0),l.current&&(clearTimeout(l.current),l.current=null))},[t,r]);return n.useEffect(function(){var t=a.current;return i(a.current),u({target:t}),t.addEventListener("scroll",u,{passive:!0}),function(){i(null),t.removeEventListener("scroll",u)}},[a,u,o,i]),{scrollerRef:a,scrollByCallback:function(t){null===s.current&&a.current.scrollBy(t)},scrollToCallback:function(e){var n=a.current;if(n){var o,i,u,c="smooth"===e.behavior;if(n===window?(i=document.documentElement.offsetHeight,o=window.innerHeight,u=document.documentElement.scrollTop):(i=n.scrollHeight,o=n.offsetHeight,u=n.scrollTop),o===i||e.top===u)return t(u),void(c&&r(!0));e.top=Math.max(Math.min(i-o,e.top),0),c?(s.current=e.top,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){l.current=null,s.current=null,r(!0)},1e3)):s.current=null,n.scrollTo(e)}}}}var pt=e.system(function(t){var n=t[0],r=n.sizes,o=n.listRefresh,i=t[1].scrollTop,a=t[2].scrollToIndex,s=t[3].didMount,l=e.statefulStream(!0),u=e.statefulStream(0);return e.connect(e.pipe(s,e.withLatestFrom(u),e.filter(function(t){return 0!==t[1]}),e.mapTo(!1)),l),e.subscribe(e.pipe(o,e.withLatestFrom(l,r),e.filter(function(t){var e=t[1];return!I(t[2].sizeTree)&&!e}),e.withLatestFrom(u)),function(t){var n=t[1];e.handleNext(i,function(){e.publish(l,!0)}),e.publish(a,n)}),{scrolledToInitialItem:l,initialTopMostItemIndex:u}},e.tup(D,f,Y,d),{singleton:!0});function ht(t){return!!t&&("smooth"===t?"smooth":"auto")}var vt=e.system(function(t){var n=t[0],r=n.totalCount,o=n.listRefresh,i=t[1],a=i.isAtBottom,s=i.atBottomState,l=t[2].scrollToIndex,u=t[3].scrolledToInitialItem,c=t[4],m=c.propsReady,f=c.didMount,d=e.statefulStream(!1);function p(t,n){e.publish(l,{index:t-1,align:"end",behavior:n})}return e.subscribe(e.pipe(e.combineLatest(e.duc(r),f),e.withLatestFrom(e.duc(d),a,u),e.map(function(t){var e=t[0],n=e[0],r=e[1]&&t[3],o="auto";return r&&(o=function(t,e){return"function"==typeof t?ht(t(e)):e&&ht(t)}(t[1],t[2]),r=r&&!!o),{totalCount:n,shouldFollow:r,followOutputBehavior:o}}),e.filter(function(t){return t.shouldFollow})),function(t){var n=t.totalCount,r=t.followOutputBehavior;e.handleNext(o,function(){p(n,r)})}),e.subscribe(e.pipe(e.combineLatest(e.duc(d),r,m),e.filter(function(t){return t[0]&&t[2]}),e.scan(function(t,e){var n=e[1];return{refreshed:t.value===n,value:n}},{refreshed:!1,value:0}),e.filter(function(t){return t.refreshed}),e.withLatestFrom(d,r)),function(t){var n=t[1],r=t[2],o=e.handleNext(s,function(t){n&&!t.atBottom&&"SIZE_INCREASED"===t.notAtBottomBecause&&p(r,"auto")});setTimeout(o,100)}),e.subscribe(e.pipe(e.combineLatest(e.duc(d),s),e.withLatestFrom(r)),function(t){var e=t[0],n=e[1];e[0]&&!n.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===n.notAtBottomBecause&&p(t[1],"auto")}),{followOutput:d}},e.tup(D,h,Y,pt,d));function gt(t){return t.reduce(function(t,e){return t.groupIndices.push(t.totalCount),t.totalCount+=e+1,t},{totalCount:0,groupIndices:[]})}var St=e.system(function(t){var n=t[0],r=n.totalCount,o=n.groupIndices,i=n.sizes,a=t[1],s=a.scrollTop,l=a.headerHeight,u=e.stream(),c=e.stream(),m=e.streamFromEmitter(e.pipe(u,e.map(gt)));return e.connect(e.pipe(m,e.map(e.prop("totalCount"))),r),e.connect(e.pipe(m,e.map(e.prop("groupIndices"))),o),e.connect(e.pipe(e.combineLatest(s,i,l),e.filter(function(t){return j(t[1])}),e.map(function(t){return w(t[1].groupOffsetTree,Math.max(t[0]-t[2],0),"v")[0]}),e.distinctUntilChanged(),e.map(function(t){return[t]})),c),{groupCounts:u,topItemsIndexes:c}},e.tup(D,f)),It={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function Ct(t,e,n){if(0===t.length)return[];if(!j(e))return t.map(function(t){return i({},t,{index:t.index+n,originalIndex:t.index})});for(var r,o=[],a=F(e.groupOffsetTree,t[0].index,t[t.length-1].index),s=void 0,u=0,c=l(t);!(r=c()).done;){var m=r.value;(!s||s.end<m.index)&&(s=a.shift(),u=e.groupIndices.indexOf(s.start)),o.push(i({},m.index===s.start?{type:"group",index:u}:{index:m.index-(u+1)+n,groupIndex:u},{size:m.size,offset:m.offset,originalIndex:m.index,data:m.data}))}return o}function xt(t,e,n,r,o){var i=0,a=0;if(t.length>0){i=t[0].offset;var s=t[t.length-1];a=s.offset+s.size}var l=i,u=r.lastOffset+(n-r.lastIndex)*r.lastSize-a;return{items:Ct(t,r,o),topItems:Ct(e,r,o),topListHeight:e.reduce(function(t,e){return e.size+t},0),offsetTop:i,offsetBottom:u,top:l,bottom:a,totalCount:n}}var wt,Tt,bt,yt=e.system(function(t){var n=t[0],r=n.statefulScrollTop,o=n.headerHeight,a=t[1],s=a.sizes,m=a.totalCount,f=a.data,d=a.firstItemIndex,p=t[2],h=t[3],v=h.visibleRange,g=h.listBoundary,S=h.topListHeight,C=t[4],x=C.scrolledToInitialItem,T=C.initialTopMostItemIndex,b=t[5].topListHeight,y=t[6],E=t[7].didMount,L=e.statefulStream([]),H=e.stream();e.connect(p.topItemsIndexes,L);var k=e.statefulStreamFromEmitter(e.pipe(e.combineLatest(E,e.duc(v),e.duc(m),e.duc(s),e.duc(T),x,e.duc(L),e.duc(d),f),e.filter(function(t){return t[0]}),e.map(function(t){var n=t[1],i=n[0],a=n[1],s=t[2],u=t[4],c=t[5],m=t[6],f=t[7],d=t[8],p=t[3],h=p.sizeTree,v=p.offsetTree;if(0===s||0===i&&0===a)return It;if(I(h))return xt(function(t,e,n){if(j(e)){var r=_(t,e);return[{index:w(e.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:n&&n[0]}]}return[{index:t,size:0,offset:0,data:n&&n[0]}]}(u,p,d),[],s,p,f);var g=[];if(m.length>0)for(var S,C=m[0],x=m[m.length-1],T=0,b=l(F(h,C,x));!(S=b()).done;)for(var y=S.value,E=y.value,L=Math.max(y.start,C),H=Math.min(y.end,x),k=L;k<=H;k++)g.push({index:k,size:E,offset:T,data:d&&d[k]}),T+=E;if(!c)return xt([],g,s,p,f);if(j(p)){var z=Math.max(e.getValue(r)-e.getValue(o),0);m=[w(p.groupOffsetTree,z,"v")[0]]}var B=m.length>0?m[m.length-1]+1:0,M=function(t,e,n,r){return void 0===r&&(r=0),r>0&&(e=Math.max(e,P(t,r,W).offset)),R((i=n,s=O(o=t,e,a=A),l=O(o,i,a,s),o.slice(s,l+1)),N);var o,i,a,s,l}(v,i,a,B),U=s-1;return xt(e.tap([],function(t){for(var e,n=l(M);!(e=n()).done;){var r=e.value,o=r.value,s=o.offset,u=r.start,c=o.size;o.offset<i&&(s+=((u+=Math.floor((i-o.offset)/c))-r.start)*c),u<B&&(s+=(B-u)*c,u=B);for(var m=Math.min(r.end,U),f=u;f<=m&&!(s>=a);f++)t.push({index:f,size:c,offset:s,data:d&&d[f]}),s+=c}}),g,s,p,f)}),e.distinctUntilChanged()),It);return e.connect(e.pipe(f,e.filter(function(t){return void 0!==t}),e.map(function(t){return t.length})),m),e.connect(e.pipe(k,e.map(e.prop("topListHeight"))),b),e.connect(b,S),e.connect(k,y.listStateListener),e.connect(e.pipe(k,e.map(function(t){return[t.top,t.bottom]})),g),e.connect(e.pipe(k,e.map(function(t){return t.items})),H),i({listState:k,topItemsIndexes:L,endReached:e.streamFromEmitter(e.pipe(k,e.filter(function(t){return t.items.length>0}),e.withLatestFrom(m,f),e.filter(function(t){var e=t[0].items;return e[e.length-1].originalIndex===t[1]-1}),e.map(function(t){return[t[1]-1,t[2]]}),e.distinctUntilChanged(u),e.map(function(t){return t[0]}))),startReached:e.streamFromEmitter(e.pipe(k,e.throttleTime(200),e.filter(function(t){var e=t.items;return e.length>0&&e[0].originalIndex===t.topItems.length}),e.map(function(t){return t.items[0].index}),e.distinctUntilChanged())),rangeChanged:e.streamFromEmitter(e.pipe(k,e.filter(function(t){return t.items.length>0}),e.map(function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}}),e.distinctUntilChanged(c))),itemsRendered:H},y)},e.tup(f,D,St,$,pt,Y,h,d),{singleton:!0}),Et=e.system(function(t){var n=t[0],r=n.sizes,o=n.firstItemIndex,i=n.data,a=t[1].listState,s=t[2].didMount,u=e.statefulStream(0);return e.connect(e.pipe(s,e.withLatestFrom(u),e.filter(function(t){return 0!==t[1]}),e.withLatestFrom(r,o,i),e.map(function(t){var e=t[0][1],n=t[1],r=t[2],o=t[3],i=void 0===o?[]:o,a=0;if(n.groupIndices.length>0)for(var s,u=l(n.groupIndices);!((s=u()).done||s.value-a>=e);)a++;var c=e+a;return xt(Array.from({length:c}).map(function(t,e){return{index:e,size:0,offset:0,data:i[e]}}),[],c,n,r)})),a),{initialItemCount:u}},e.tup(D,yt,d),{singleton:!0}),Lt=e.system(function(t){var n=t[0].topItemsIndexes,r=e.statefulStream(0);return e.connect(e.pipe(r,e.filter(function(t){return t>0}),e.map(function(t){return Array.from({length:t}).map(function(t,e){return e})})),n),{topItemCount:r}},e.tup(yt)),Ht=e.system(function(t){var n=t[0],r=n.footerHeight,o=n.headerHeight,i=t[1].listState,a=e.stream(),s=e.statefulStreamFromEmitter(e.pipe(e.combineLatest(r,o,i),e.map(function(t){var e=t[2];return t[0]+t[1]+e.offsetBottom+e.bottom})),0);return e.connect(e.duc(s),a),{totalListHeight:s,totalListHeightChanged:a}},e.tup(f,yt),{singleton:!0}),kt=e.system(function(t){var n=t[0],r=n.scrollBy,o=n.deviation,i=t[1].isScrolling,a=t[3],s=a.beforeUnshiftWith,l=a.sizes,u=e.streamFromEmitter(e.pipe(t[2].listState,e.withLatestFrom(n.scrollTop,n.scrollDirection,n.scrollingInProgress),e.filter(function(t){return!t[3]&&0!==t[1]&&t[2]===m}),e.map(function(t){return t[0]}),e.scan(function(t,e){var n=t[1],r=e.items,o=0;if(n.length>0&&r.length>0){var i=r[0].originalIndex,a=n[0].originalIndex;if(0!==i||0!==a)if(i===a)o=r[0].size-n[0].size;else for(var s=function(t){var e=r[t],i=n.find(function(t){return t.originalIndex===e.originalIndex});return i?e.offset!==i.offset?(o=e.offset-i.offset,"break"):void 0:"continue"},l=r.length-1;l>=0;l--){var u=s(l);if("continue"!==u&&"break"===u)break}}return[o,r]},[0,[]]),e.filter(function(t){return 0!==t[0]}),e.map(function(t){return t[0]})));return e.connect(e.pipe(u,e.withLatestFrom(o),e.map(function(t){return t[1]-t[0]})),o),e.subscribe(e.pipe(e.combineLatest(e.statefulStreamFromEmitter(i,!1),o),e.filter(function(t){return!t[0]&&0!==t[1]}),e.map(function(t){return t[1]}),e.throttleTime(1)),function(t){t>0?(e.publish(r,{top:-t,behavior:"auto"}),e.publish(o,0)):(e.publish(o,0),e.publish(r,{top:-t,behavior:"auto"}))}),e.connect(e.pipe(s,e.withLatestFrom(l),e.map(function(t){return t[0]*t[1].lastSize})),u),{deviation:o}},e.tup(f,h,yt,D)),zt=e.system(function(t){var n=t[0].totalListHeight,r=t[1].didMount,o=t[2].scrollTo,i=e.statefulStream(0);return e.subscribe(e.pipe(r,e.withLatestFrom(i),e.filter(function(t){return 0!==t[1]}),e.map(function(t){return{top:t[1]}})),function(t){e.handleNext(e.pipe(n,e.filter(function(t){return 0!==t})),function(){setTimeout(function(){e.publish(o,t)})})}),{initialScrollTop:i}},e.tup(Ht,d,f),{singleton:!0}),Ft=e.system(function(t){var n=t[0].viewportHeight,r=t[1].totalListHeight,o=e.statefulStream(!1);return{alignToBottom:o,paddingTopAddition:e.statefulStreamFromEmitter(e.pipe(e.combineLatest(o,n,r),e.filter(function(t){return t[0]}),e.map(function(t){return Math.max(0,t[1]-t[2])}),e.distinctUntilChanged()),0)}},e.tup(f,Ht),{singleton:!0}),Rt=e.system(function(t){return i({},t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])},e.tup($,Et,d,v,Ht,zt,Ft,J)),Bt=e.system(function(t){var n=t[0],r=n.totalCount,o=n.sizeRanges,s=n.fixedItemSize,l=n.defaultItemSize,u=n.trackItemSizes,c=n.data,m=n.firstItemIndex,f=n.groupIndices,d=t[1],p=d.initialTopMostItemIndex,h=d.scrolledToInitialItem,v=t[2],g=t[3],S=t[4],I=S.listState,C=S.topItemsIndexes,x=a(S,["listState","topItemsIndexes"]),w=t[5].scrollToIndex,T=t[7].topItemCount,b=t[8].groupCounts,y=t[9];return e.connect(x.rangeChanged,y.scrollSeekRangeChanged),e.connect(e.pipe(y.windowViewportRect,e.map(e.prop("visibleHeight"))),v.viewportHeight),i({totalCount:r,data:c,firstItemIndex:m,sizeRanges:o,initialTopMostItemIndex:p,scrolledToInitialItem:h,topItemsIndexes:C,topItemCount:T,groupCounts:b,fixedItemHeight:s,defaultItemHeight:l},g,{listState:I,scrollToIndex:w,trackItemSizes:u,groupIndices:f},x,y,v)},e.tup(D,pt,f,vt,yt,Y,kt,Lt,St,Rt)),Mt=(wt=function(){if("undefined"==typeof document)return"sticky";var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"},bt=!1,function(){return bt||(bt=!0,Tt=wt()),Tt});function Ot(t){return t}var Pt=e.system(function(){var t=e.statefulStream(function(t){return"Item "+t}),n=e.statefulStream(function(t){return"Group "+t}),r=e.statefulStream({}),o=e.statefulStream(Ot),i=e.statefulStream("div"),a=e.statefulStream(e.noop),s=function(t,n){return void 0===n&&(n=null),e.statefulStreamFromEmitter(e.pipe(r,e.map(function(e){return e[t]}),e.distinctUntilChanged()),n)};return{itemContent:t,groupContent:n,components:r,computeItemKey:o,headerFooterTag:i,scrollerRef:a,FooterComponent:s("Footer"),HeaderComponent:s("Header"),TopItemListComponent:s("TopItemList"),ListComponent:s("List","div"),ItemComponent:s("Item","div"),GroupComponent:s("Group","div"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder")}});function Ut(t,n){var r=e.stream();return e.subscribe(r,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+n,"color: red;","color: inherit;","color: blue;")}),e.connect(r,t),r}var Wt=e.system(function(t){var n=t[0],r=t[1],o={item:Ut(r.itemContent,"Rename the %citem%c prop to %citemContent."),group:Ut(r.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Ut(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Ut(n.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Ut(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:e.stream(),maxHeightCacheSize:e.stream(),footer:e.stream(),header:e.stream(),HeaderContainer:e.stream(),FooterContainer:e.stream(),ItemContainer:e.stream(),ScrollContainer:e.stream(),GroupContainer:e.stream(),ListContainer:e.stream(),emptyComponent:e.stream(),scrollSeek:e.stream()};function s(t,n,o){e.connect(e.pipe(t,e.withLatestFrom(r.components),e.map(function(t){var e,r=t[0],a=t[1];return console.warn("react-virtuoso: "+o+" property is deprecated. Pass components."+n+" instead."),i({},a,((e={})[n]=r,e))})),r.components)}return e.subscribe(o.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),e.subscribe(o.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),e.subscribe(o.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),e.subscribe(o.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),e.subscribe(o.scrollSeek,function(t){var o=t.placeholder,s=a(t,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),e.publish(r.components,i({},e.getValue(r.components),{ScrollSeekPlaceholder:o})),e.publish(n.scrollSeekConfiguration,s)}),s(o.footer,"Footer","footer"),s(o.header,"Header","header"),s(o.ItemContainer,"Item","ItemContainer"),s(o.ListContainer,"List","ListContainer"),s(o.ScrollContainer,"Scroller","ScrollContainer"),s(o.emptyComponent,"EmptyPlaceholder","emptyComponent"),s(o.GroupContainer,"Group","GroupContainer"),i({},n,r,o)},e.tup(Bt,Pt)),At=function(t){return n.createElement("div",{style:{height:t.height}})},Nt={position:Mt(),zIndex:1},Vt=n.memo(function(t){var e,r=t.showTopList,o=void 0!==r&&r,i=ne("listState"),a=ne("deviation"),s=ee("sizeRanges"),l=ne("itemContent"),u=ne("groupContent"),c=(e=s,ct(function(t){var n=function(t,e){var n=t.length;if(0===n)return null;for(var r=[],o=0;o<n;o++){var i=t.item(o);if(i&&void 0!==i.dataset.index){var a=parseInt(i.dataset.index),s=parseInt(i.dataset.knownSize),l=i.offsetHeight;if(0===l)throw new Error("Zero-sized element, this should not happen");if(l!==s){var u=r[r.length-1];0===r.length||u.size!==l||u.endIndex!==a-1?r.push({startIndex:a,endIndex:a,size:l}):r[r.length-1].endIndex++}}}return r}(t.children);null!==n&&e(n)},ne("trackItemSizes"))),m=ne("EmptyPlaceholder"),f=ne("ScrollSeekPlaceholder")||At,d=ne("ListComponent"),p=ne("ItemComponent"),h=ne("GroupComponent"),v=ne("computeItemKey"),g=ne("isSeeking"),S=ne("groupIndices").length>0,I=ne("paddingTopAddition"),C=ne("scrolledToInitialItem"),x=o?{}:{boxSizing:"border-box",paddingTop:i.offsetTop+I,paddingBottom:i.offsetBottom,marginTop:a};return!o&&0===i.items.length&&m&&C?n.createElement(m):n.createElement(d,{ref:c,style:x},(o?i.topItems:i.items).map(function(t){var e=t.originalIndex,r=v(e);return g?n.createElement(f,{key:r,index:t.index,height:t.size}):"group"===t.type?n.createElement(h,{key:r,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:Nt},u(t.index)):n.createElement(p,{key:r,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,"data-item-group-index":t.groupIndex},S?l(t.index,t.groupIndex,t.data):l(t.index,t.data))}))}),Gt={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},_t={width:"100%",height:"100%",position:"absolute",top:0},jt={width:"100%",position:Mt(),top:0},Dt=n.memo(function(){var t=ne("HeaderComponent"),e=ee("headerHeight"),r=ne("headerFooterTag"),o=ct(function(t){return e(t.offsetHeight)});return t?n.createElement(r,{ref:o},n.createElement(t)):null}),Kt=n.memo(function(){var t=ne("FooterComponent"),e=ee("footerHeight"),r=ne("headerFooterTag"),o=ct(function(t){return e(t.offsetHeight)});return t?n.createElement(r,{ref:o},n.createElement(t)):null});function qt(t){var e=t.usePublisher,r=t.useEmitter,o=t.useEmitterValue;return n.memo(function(t){var s=t.style,l=t.children,u=a(t,["style","children"]),c=e("scrollTop"),m=o("ScrollerComponent"),f=dt(c,e("smoothScrollTargetReached"),m,o("scrollerRef")),d=f.scrollerRef,p=f.scrollByCallback;return r("scrollTo",f.scrollToCallback),r("scrollBy",p),n.createElement(m,i({ref:d,style:i({},Gt,s),tabIndex:0},u),l)})}function Yt(t){var e=t.usePublisher,r=t.useEmitter,o=t.useEmitterValue;return n.memo(function(t){var s=t.style,l=t.children,u=a(t,["style","children"]),c=e("windowScrollTop"),m=o("ScrollerComponent"),f=e("smoothScrollTargetReached"),d=o("totalListHeight"),p=dt(c,f,m),h=p.scrollerRef,v=p.scrollByCallback,g=p.scrollToCallback;return ft(function(){return h.current=window,function(){h.current=null}},[h]),r("windowScrollTo",g),r("scrollBy",v),n.createElement(m,i({style:i({position:"relative"},s,0!==d?{height:d}:{})},u),l)})}var Zt=function(t){var r=t.children,o=ee("viewportHeight"),i=ct(e.compose(o,e.prop("offsetHeight")));return n.createElement("div",{style:_t,ref:i},r)},$t=function(t){var e=t.children,r=mt(ee("windowViewportRect"));return n.createElement("div",{ref:r,style:_t},e)},Jt=function(t){var e=t.children,r=ne("TopItemListComponent"),o=ne("headerHeight"),a=i({},jt,{marginTop:o+"px"});return n.createElement(r||"div",{style:a},e)},Qt=n.memo(function(t){var e=ne("useWindowScroll"),r=ne("topItemsIndexes").length>0,o=e?$t:Zt;return n.createElement(e?ie:oe,Object.assign({},t),n.createElement(o,null,n.createElement(Dt,null),n.createElement(Vt,null),n.createElement(Kt,null)),r&&n.createElement(Jt,null,n.createElement(Vt,{showTopList:!0})))}),Xt=t.systemToComponent(Wt,{required:{},optional:{followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Qt),te=Xt.Component,ee=Xt.usePublisher,ne=Xt.useEmitterValue,re=Xt.useEmitter,oe=qt({usePublisher:ee,useEmitterValue:ne,useEmitter:re}),ie=Yt({usePublisher:ee,useEmitterValue:ne,useEmitter:re}),ae=e.system(function(){var t=e.statefulStream(function(t){return"Item "+t}),n=e.statefulStream({}),r=e.statefulStream("virtuoso-grid-item"),o=e.statefulStream("virtuoso-grid-list"),i=e.statefulStream(Ot),a=e.statefulStream(e.noop),s=function(t,r){return void 0===r&&(r=null),e.statefulStreamFromEmitter(e.pipe(n,e.map(function(e){return e[t]}),e.distinctUntilChanged()),r)};return{itemContent:t,components:n,computeItemKey:i,itemClassName:r,listClassName:o,scrollerRef:a,ListComponent:s("List","div"),ItemComponent:s("Item","div"),ScrollerComponent:s("Scroller","div"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder","div")}}),se=e.system(function(t){var n=t[0],r=t[1],o={item:Ut(r.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:e.stream(),ScrollContainer:e.stream(),ListContainer:e.stream(),emptyComponent:e.stream(),scrollSeek:e.stream()};function s(t,n,o){e.connect(e.pipe(t,e.withLatestFrom(r.components),e.map(function(t){var e,r=t[0],a=t[1];return console.warn("react-virtuoso: "+o+" property is deprecated. Pass components."+n+" instead."),i({},a,((e={})[n]=r,e))})),r.components)}return e.subscribe(o.scrollSeek,function(t){var o=t.placeholder,s=a(t,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),e.publish(r.components,i({},e.getValue(r.components),{ScrollSeekPlaceholder:o})),e.publish(n.scrollSeekConfiguration,s)}),s(o.ItemContainer,"Item","ItemContainer"),s(o.ListContainer,"List","ListContainer"),s(o.ScrollContainer,"Scroller","ScrollContainer"),i({},n,r,o)},e.tup(at,ae)),le=n.memo(function(){var t=he("gridState"),e=he("listClassName"),r=he("itemClassName"),o=he("itemContent"),i=he("computeItemKey"),a=he("isSeeking"),s=he("ItemComponent"),l=he("ListComponent"),u=he("ScrollSeekPlaceholder"),c=pe("itemDimensions"),m=ct(function(t){var e=t.firstChild;e&&c({width:e.offsetWidth,height:e.offsetHeight})});return n.createElement(l,{ref:m,className:e,style:{paddingTop:t.offsetTop,paddingBottom:t.offsetBottom}},t.items.map(function(e){var l=i(e.index);return a?n.createElement(u,{key:l,style:{height:t.itemHeight,width:t.itemWidth}}):n.createElement(s,{className:r,"data-index":e.index,key:l},o(e.index))}))}),ue=function(t){var e=t.children,r=pe("viewportDimensions"),o=ct(function(t){r({width:t.offsetWidth,height:t.offsetHeight})});return n.createElement("div",{style:_t,ref:o},e)},ce=function(t){var e=t.children,r=mt(pe("windowViewportRect"));return n.createElement("div",{ref:r,style:_t},e)},me=n.memo(function(t){var e=i({},t),r=he("useWindowScroll"),o=r?ce:ue;return n.createElement(r?Se:ge,Object.assign({},e),n.createElement(o,null,n.createElement(le,null)))}),fe=t.systemToComponent(se,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},me),de=fe.Component,pe=fe.usePublisher,he=fe.useEmitterValue,ve=fe.useEmitter,ge=qt({usePublisher:pe,useEmitterValue:he,useEmitter:ve}),Se=Yt({usePublisher:pe,useEmitterValue:he,useEmitter:ve}),Ie=te,Ce=de;exports.GroupedVirtuoso=te,exports.Virtuoso=Ie,exports.VirtuosoGrid=Ce;
//# sourceMappingURL=index.js.map
